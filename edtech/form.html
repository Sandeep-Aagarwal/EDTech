<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Course Enrollment</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <form class="form-box" id="enrollForm">
    <h2>Enroll in Course</h2>

    <div class="alert" id="successMsg">
      ✅ Enrolled Successfully
    </div>

    <input type="text" id="name" placeholder="Full Name" required>
    <input type="email" id="email" placeholder="Email Address" required>
    <input type="tel" id="phone" placeholder="Phone Number" required>

    <select id="course" required>
      <option value="">Select Course</option>
      <option>Cyber Security</option>
      <option>Cloud Computing</option>
      <option>Blockchain</option>
      <option>Internet of Things (IoT)</option>
      <option>Full Stack Web Development</option>
      <option>AI/ML</option>
    </select>

    <select id="level" required>
      <option value="">Experience Level</option>
      <option>Beginner</option>
      <option>Intermediate</option>
      <option>Advanced</option>
    </select>

    <textarea id="reason" rows="3" placeholder="Why do you want to join?" required></textarea>

    <button type="submit">Enroll Now ➜</button>
  </form>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDvnQ2KGN3Nzdka6cKgvM62OahEBTxz9zc",
      authDomain: "edtech-1c372.firebaseapp.com",
      databaseURL: "https://edtech-1c372-default-rtdb.firebaseio.com",
      projectId: "edtech-1c372",
      storageBucket: "edtech-1c372.firebasestorage.app",
      messagingSenderId: "962463630009",
      appId: "1:962463630009:web:3f50296a818caee592d168",
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const enrollDB = ref(database, "courseEnrollments");

    document.getElementById("enrollForm").addEventListener("submit", submitForm);

    function submitForm(e) {
      e.preventDefault();

      const data = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        phone: document.getElementById("phone").value,
        course: document.getElementById("course").value,
        level: document.getElementById("level").value,
        reason: document.getElementById("reason").value,
      };

      const newEntry = push(enrollDB);

      set(newEntry, data).then(() => {
        document.getElementById("successMsg").style.display = "block";
        document.getElementById("enrollForm").reset();

        setTimeout(() => {
          document.getElementById("successMsg").style.display = "none";
        }, 3000);
      });
    }
  </script>

</body>
</html>
